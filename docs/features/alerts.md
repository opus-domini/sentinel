# Alerts

![Desktop alerts](assets/images/desktop-alerts.png)

The Alerts page (`/alerts`) provides a dedicated feed for monitoring operational alerts generated by Sentinel. Alerts surface anomalies detected by [Watchtower](/features/timeline-watchtower.md) and state changes from the [Services](/features/services.md) control plane.

## Sources

Alerts are generated by two subsystems:

- **Watchtower** — terminal activity monitoring detects anomalies in tmux sessions (e.g. unexpected output patterns, idle timeouts).
- **Service state changes** — the ops control plane raises alerts when a tracked service enters a degraded or failed state (e.g. a service crash or restart failure).

## Severity Levels

Two severity levels are supported:

- `warn` — degraded state or unusual activity that may need attention but is not immediately critical.
- `error` — a failure requiring immediate action, such as a service crash or an unrecoverable error.

## Deduplication

Alerts targeting the same resource are deduplicated by key. When a duplicate alert fires, the existing alert's occurrence counter is incremented rather than creating a new entry. This prevents alert storms from flooding the feed during repeated failures.

## Acknowledging Alerts

- Click **Ack** on an open alert to mark it as acknowledged.
- Acknowledged alerts remain visible in the feed but stop contributing to the open alert count.
- Alerts are auto-resolved when their underlying condition clears (e.g. a failed service returns to active state).
- The ack action uses optimistic updates with rollback on failure.

```
POST /api/ops/alerts/{alert}/ack
```

## UI Features

- Dedicated `/alerts` route with full-page alert management.
- Sidebar displays overview stats: host identity, uptime, and health summary.
- Severity filter buttons (`all` / `warn` / `error`) narrow the visible feed.
- Open alert count badge in the sidebar reflects unacknowledged alerts.
- Scrollable alert list with cards showing: title, resource, occurrence count, status badge, and message.
- Help dialog (triggered via the `?` button) explaining the alerting system.

## Realtime Events

Alert state is kept current via the `/ws/events` WebSocket:

- `ops.alerts.updated` — full alert list refresh when any alert changes state.
- `ops.overview.updated` — updated overview payload including health summary and alert counts.

## API Endpoints

- `GET /api/ops/alerts` — list active and recent ops alerts
- `POST /api/ops/alerts/{alert}/ack` — acknowledge a single alert
- `GET /api/ops/overview` — host + Sentinel + services summary (includes alert counts)

## Limitations

- Alerts are local to the Sentinel instance. There is no forwarding to external alerting systems (PagerDuty, Slack, etc.).
- Alert history is retained in SQLite and subject to the configured retention policy.
